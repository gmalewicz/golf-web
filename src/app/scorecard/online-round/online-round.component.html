<div *ngIf="!display" class="d-flex justify-content-center">
  <span class="spinner-border text-success" style="width: 3rem; height: 3rem;" role="status"></span>
</div>
<div *ngIf="display">
  <app-online-nav [curHoleStrokes] = 'curHoleStrokes'
                  [curPlayerIdx] = 'curPlayerIdx'
                  [puttSelectorActive] = 'puttSelectorActive'
                  [onlineRounds] = 'onlineRounds'
                  [curHolePutts] = 'curHolePutts'
                  [penaltySelectorActive] = 'penaltySelectorActive'
                  [curHolePenalties] = 'curHolePenalties'
                  [addScore] = 'addScore.bind(this)'>
  </app-online-nav>
  <div>
    <table id="holeStake-tbl" class="table table-bordered" aria-describedby="Online round hole result">
      <thead>
        <tr>
          <ng-template [ngTemplateOutlet]="TableHeader"></ng-template>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            {{curHoleIdx + 1}}
          </td>
          <td [ngClass]="calculateStyle(0)">
            <span *ngIf="curHoleStrokes[0] > 0">{{curHoleStrokes[0]}}</span>
            <span class="supsub">
              <span class="superscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(curHolePutts[0])">
                  <span class="blackDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
              <span class="subscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(curHolePenalties[0])">
                  <span class="redDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
            </span>
          </td>
          <td *ngIf="onlineRounds.length > 1" [ngClass]="calculateStyle(1)">
            <span *ngIf="curHoleStrokes[0] > 0">{{curHoleStrokes[1]}}</span>
            <span class="supsub">
              <span class="superscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(curHolePutts[1])">
                  <span class="blackDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
              <span class="subscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(curHolePenalties[1])">
                  <span class="redDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
            </span>
          </td>
          <td *ngIf="onlineRounds.length > 2" [ngClass]="calculateStyle(2)">
            <span *ngIf="curHoleStrokes[0] > 0">{{curHoleStrokes[2]}}</span>
            <span class="supsub">
              <span class="superscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(curHolePutts[2])">
                  <span class="blackDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
              <span class="subscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(curHolePenalties[2])">
                  <span class="redDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
            </span>
          </td>
          <td *ngIf="onlineRounds.length > 3" [ngClass]="calculateStyle(3)">
            <span *ngIf="curHoleStrokes[0] > 0">{{curHoleStrokes[3]}}</span>
            <span class="supsub">
              <span class="superscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(curHolePutts[3])">
                  <span class="blackDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
              <span class="subscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(curHolePenalties[3])">
                  <span class="redDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <br/>
  <div>
    <div>
      <h3>
        Score Card
      </h3>
    </div>
    <table id="holeStake-tbl" class="table table-bordered" aria-describedby="Online round score card">
      <thead>
        <tr>
          <th id="nav"></th>
          <ng-template [ngTemplateOutlet]="TableHeader"></ng-template>
          <th id="par">Par</th>
          <th id="si">Si</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let stroke of strokes, let i = index">
          <td *ngIf="i === curHoleIdx">
            <a>
              <fa-icon [icon]="faPlay" class="golf-green"></fa-icon>
            </a>
          </td>
          <td *ngIf="i != curHoleIdx">
            <a (click)="selectHole(i)">
              <fa-icon [icon]="faPlay" class="golf-gray"></fa-icon>
            </a>
          </td>
          <td>
            {{i + 1}}
          </td>
          <td>
            <span *ngIf="stroke[0] > 0">{{stroke[0]}}</span>
            <span class="supsub">
              <span class="superscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(putts[i][0])">
                  <span class="blackDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
              <span class="subscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(penalties[i][0])">
                  <span class="redDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
            </span>
          </td>
          <td *ngIf="onlineRounds.length > 1">
            <span *ngIf="stroke[1] > 0">{{stroke[1]}}</span>
            <span class="supsub">
              <span class="superscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(putts[i][1])">
                  <span class="blackDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
              <span class="subscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(penalties[i][1])">
                  <span class="redDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
            </span>
          </td>
          <td *ngIf="onlineRounds.length > 2">
            <span *ngIf="stroke[2] > 0">{{stroke[2]}}</span>
            <span class="supsub">
              <span class="superscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(putts[i][2])">
                  <span class="blackDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
              <span class="subscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(penalties[i][2])">
                  <span class="redDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
            </span>
          </td>
          <td *ngIf="onlineRounds.length > 3">
            <span *ngIf="stroke[3] > 0">{{stroke[3]}}</span>
            <span class="supsub">
              <span class="superscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(putts[i][3])">
                  <span class="blackDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
              <span class="subscript">
                <span class="dotSeparator"></span>
                <span *ngFor="let i = index of counter(penalties[i][3])">
                  <span class="redDot"></span>
                  <span class="dotSeparator"></span>
                </span>
              </span>
            </span>
          </td>
          <td>
            {{course.holes[i].par}}
          </td>
          <td>
            {{course.holes[i].si}}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div>
    <br />
    <div class="form-group">
      <button type="button" class="btn btn-success" routerLink="">
        Cancel
      </button>
      &nbsp;
      <button type="button" class="btn btn-success" (click)="onDelete()">
        Delete
      </button>
      &nbsp;
      <button type="button" class="btn btn-success" (click)="onFinal()">
        Finalize
      </button>
    </div>
  </div>
</div>
<ng-template #TableHeader >
  <th id="hole">Hole</th>
  <th id="p1str">{{onlineRounds[0].player.nick}} ({{totalStrokes[0]}})</th>
  <th id="p2str" *ngIf="onlineRounds.length > 1">{{onlineRounds[1].player.nick}} ({{totalStrokes[1]}})</th>
  <th id="p3str" *ngIf="onlineRounds.length > 2">{{onlineRounds[2].player.nick}} ({{totalStrokes[2]}})</th>
  <th id="p4str" *ngIf="onlineRounds.length > 3">{{onlineRounds[3].player.nick}} ({{totalStrokes[3]}})</th>
</ng-template>
